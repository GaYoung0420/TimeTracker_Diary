import{r as e}from"./react-vendor-DD48japz.js";var t={exports:{}},a={},n=e,s=Symbol.for("react.element"),o=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,a){var n,o={},c=null,d=null;for(n in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)r.call(t,n)&&!l.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:s,type:e,key:c,ref:d,props:o,_owner:i.current}}a.Fragment=o,a.jsx=c,a.jsxs=c,t.exports=a;var d=t.exports;const h=new Map,u={getDailyData:async e=>(await fetch(`/api/daily/${e}`)).json(),saveDailyData:async(e,t)=>(await fetch(`/api/daily/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json(),addTodo:async(e,t,a,n,s,o,r=null)=>(await fetch("/api/todos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:e,text:t,category_id:a,todo_category_id:n,scheduled_time:s,duration:o,parent_id:r})})).json(),updateTodo:async(e,t)=>(await fetch(`/api/todos/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json(),deleteTodo:async e=>(await fetch(`/api/todos/${e}`,{method:"DELETE"})).json(),reorderTodos:async e=>(await fetch("/api/todos/reorder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:e})})).json(),incrementPomodoro:async e=>(await fetch(`/api/todos/${e}/pomodoro`,{method:"POST",headers:{"Content-Type":"application/json"}})).json(),getRoutines:async()=>(await fetch("/api/routines")).json(),addRoutine:async(e,t="âœ“",a,n,s,o,r,i)=>(await fetch("/api/routines",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,emoji:t,order:a,scheduled_time:n,duration:s,weekdays:o,start_date:r,end_date:i})})).json(),updateRoutine:async(e,t)=>(await fetch(`/api/routines/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json(),deleteRoutine:async e=>(await fetch(`/api/routines/${e}`,{method:"DELETE"})).json(),reorderRoutines:async e=>(await fetch("/api/routines/reorder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:e})})).json(),updateRoutineCheck:async(e,t,a)=>(await fetch("/api/routine-checks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:e,routine_id:t,checked:a})})).json(),getCategories:async()=>(await fetch("/api/categories")).json(),createCategory:async(e,t)=>(await fetch("/api/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,color:t})})).json(),updateCategory:async(e,t)=>(await fetch(`/api/categories/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json(),deleteCategory:async e=>(await fetch(`/api/categories/${e}`,{method:"DELETE"})).json(),getEvents:async e=>(await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:e})})).json(),createEvent:async(e,t,a,n,s,o,r,i)=>(await fetch("/api/events/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:e,title:t,start_time:a,end_time:n,category_id:s,is_plan:o,description:r,end_date:i})})).json(),updateEvent:async(e,t)=>(await fetch(`/api/events/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json(),deleteEvent:async e=>(await fetch(`/api/events/${e}`,{method:"DELETE"})).json(),getWakeSleepEvents:async e=>(await fetch("/api/events/wake-sleep",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:e})})).json(),async getMonthlyStats(e,t){const a=`${e}-${String(t).padStart(2,"0")}`,n=h.get(a);if(n&&Date.now()-n.ts<6e4)return n.data;const s=await fetch("/api/monthly/stats",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({year:e,month:t})}),o=await s.json();return o&&o.success&&h.set(a,{data:o,ts:Date.now()}),o},getMonthlyTimeStats:async(e,t)=>(await fetch("/api/monthly/time-stats",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({year:e,month:t})})).json(),getMonthlyRoutineMoodStats:async(e,t)=>(await fetch("/api/monthly/routine-mood-stats",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({year:e,month:t})})).json(),saveFeedback:async(e,t)=>(await fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:e,feedback:t})})).json(),create10AMWake:async e=>(await fetch("/api/events/create-wake",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:e,time:"10:00"})})).json(),getTodoCategories:async()=>(await fetch("/api/todo-categories")).json(),addTodoCategory:async(e,t,a)=>(await fetch("/api/todo-categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,event_category_id:t,color:a})})).json(),updateTodoCategory:async(e,t,a,n)=>(await fetch(`/api/todo-categories/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,event_category_id:a,color:n})})).json(),deleteTodoCategory:async e=>(await fetch(`/api/todo-categories/${e}`,{method:"DELETE"})).json(),completeTodo:async e=>(await fetch(`/api/todos/${e}/complete`,{method:"POST",headers:{"Content-Type":"application/json"}})).json(),async register(e,t,a){try{const n=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t,username:a})}),s=n.headers.get("content-type");return s&&s.includes("application/json")?await n.json():n.ok?{success:!1,message:"ì„œë²„ ì‘ë‹µ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤."}:{success:!1,message:`ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. (${n.status})`}}catch(n){return{success:!1,message:"ì„œë²„ì™€ ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ìƒíƒœë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”."}}},async login(e,t){try{const a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t})}),n=a.headers.get("content-type");return n&&n.includes("application/json")?await a.json():a.ok?{success:!1,message:"ì„œë²„ ì‘ë‹µ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤."}:{success:!1,message:`ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. (${a.status})`}}catch(a){return{success:!1,message:"ì„œë²„ì™€ ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ìƒíƒœë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”."}}},logout:async()=>(await fetch("/api/auth/logout",{method:"POST",credentials:"include"})).json(),getCurrentUser:async()=>(await fetch("/api/auth/me",{credentials:"include"})).json(),getCalendars:async()=>(await fetch("/api/calendars",{credentials:"include"})).json(),addCalendar:async(e,t,a,n,s)=>(await fetch("/api/calendars",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:e,type:t,type_icon:a,url:n,color:s,enabled:!0})})).json(),updateCalendar:async(e,t)=>(await fetch(`/api/calendars/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).json(),deleteCalendar:async e=>(await fetch(`/api/calendars/${e}`,{method:"DELETE",credentials:"include"})).json()},p={"â‘ ":"#fbb9b6","â‘¡":"#fbf5b6","â‘¢":"#cafbb6","â‘£":"#fbdfb6","â‘¤":"#cab6fb","â‘¥":"#b6f4fb","â‘¦":"#e8ceb4"},m={"â‘  ë‚­ë¹„ì‹œê°„":"#D13F3F","â‘¡ ì‚¬íšŒì ":"#A78400","â‘¢ ì§€ì ":"#1E7B34","â‘£ ì˜ì ":"#C46C00","â‘¤ ìž ":"#4A4AC4","â‘¥ ìš´ë™":"#008C99","â‘¦ ê¸°íƒ€":"#654321",default:"#37352f"};function y(e,t){if(!e)return`rgba(0,0,0,${t||1})`;let a=e.replace("#","");3===a.length&&(a=a.split("").map(e=>e+e).join(""));return`rgba(${parseInt(a.substring(0,2),16)}, ${parseInt(a.substring(2,4),16)}, ${parseInt(a.substring(4,6),16)}, ${t})`}function g(e){const t=new Date(e.toLocaleString("en-US",{timeZone:"Asia/Seoul"}));return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function f(e){return e.replace(/\\n/g,"\n").replace(/\\,/g,",").replace(/\\;/g,";").replace(/\\\\/g,"\\")}function x(e,t){const a=[],n={};if(t.split(";").forEach(e=>{const[t,a]=e.split("=");n[t]=a}),"YEARLY"!==n.FREQ){const t={...e};return delete t.rrule,[t]}const s=parseInt(n.COUNT)||10,o=new Date(e.startDate);for(let r=0;r<s;r++){const t={title:e.title,description:e.description,location:e.location,uid:`${e.uid}-${r}`,isAllDay:e.isAllDay,calendarId:e.calendarId,calendarName:e.calendarName,calendarType:e.calendarType,calendarTypeIcon:e.calendarTypeIcon,calendarColor:e.calendarColor},n=new Date(o);if(n.setFullYear(o.getFullYear()+r),t.startDate=n,e.endDate){const a=new Date(e.endDate),n=new Date(a);n.setFullYear(a.getFullYear()+r),t.endDate=n}a.push(t)}return a}function j(e){e=e.replace(/^TZID=[^:]+:/,"");const t=parseInt(e.substring(0,4)),a=parseInt(e.substring(4,6))-1,n=parseInt(e.substring(6,8));if(8===e.length)return new Date(t,a,n);const s=parseInt(e.substring(9,11)),o=parseInt(e.substring(11,13)),r=parseInt(e.substring(13,15));return e.endsWith("Z")?new Date(Date.UTC(t,a,n,s,o,r)):new Date(t,a,n,s,o,r)}async function v(e,t="icloud"){try{if(!e)return[];const s=(n=t,(a=e).startsWith("webcal://")?a.replace(/^webcal:\/\//i,"https://"):("google"===n&&a.includes("calendar.google.com")&&a.includes("/calendar/")&&a.includes("/ical/"),"outlook"===n&&a.includes("outlook"),a)),o=`${""}/api/icloud-calendar/proxy?url=${encodeURIComponent(s)}`,r=await fetch(o);if(!r.ok)throw new Error(`Failed to fetch calendar: ${r.status}`);const i=function(e){const t=[],a=e.split(/\r?\n/);let n=null;for(let s=0;s<a.length;s++){let e=a[s].trim();for(;s+1<a.length&&/^[ \t]/.test(a[s+1]);)s++,e+=a[s].trim();if("BEGIN:VEVENT"===e)n={};else if("END:VEVENT"===e&&n){if(n.rrule&&n.title,n.rrule){const e=x(n,n.rrule);t.push(...e)}else t.push(n);n=null}else if(n){const t=e.indexOf(":");if(t>0){const a=e.substring(0,t),s=e.substring(t+1);a.startsWith("DTSTART")?(n.startDate=j(s),n.isAllDay=a.includes("VALUE=DATE")&&!a.includes("TZID")):a.startsWith("DTEND")?n.endDate=j(s):a.startsWith("SUMMARY")?n.title=f(s):a.startsWith("DESCRIPTION")?n.description=f(s):a.startsWith("LOCATION")?n.location=f(s):"UID"===a?n.uid=s:"RRULE"===a&&(n.rrule=s)}}}return t}(await r.text());return i}catch(s){throw s}var a,n}async function S(e){try{if(!e||0===e.length)return[];const t=e.map(async e=>{try{return(await v(e.url,e.type||"icloud")).map(t=>({...t,calendarId:e.id,calendarName:e.name,calendarType:e.type||"icloud",calendarTypeIcon:e.type_icon||e.typeIcon||"ðŸ“…",calendarColor:e.color}))}catch(t){return[]}});return(await Promise.all(t)).flat()}catch(t){throw t}}function w(e,t){const a=new Date(t);a.setHours(0,0,0,0);const n=new Date(a);return n.setDate(n.getDate()+1),e.filter(e=>{if(!e.startDate)return!1;const t=new Date(e.startDate);let s;return e.isAllDay&&t.setHours(0,0,0,0),e.endDate?(s=new Date(e.endDate),e.isAllDay&&s.setHours(0,0,0,0)):(s=new Date(t),e.isAllDay?s.setDate(s.getDate()+1):s.setHours(23,59,59,999)),t<n&&s>a}).sort((e,t)=>e.startDate&&t.startDate?e.startDate-t.startDate:0)}function b(e){if(e.isAllDay)return"ì¢…ì¼";const t=e.startDate.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1});if(e.endDate){return`${t} - ${e.endDate.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1})}`}return t}function N({currentMonth:t,goToDate:a,calendarEvents:n=[]}){const[s,o]=e.useState([]),[r,i]=e.useState([]),[l,c]=e.useState(!0),[h,f]=e.useState(null),[x,j]=e.useState({visible:!1,x:0,y:0,events:[]}),v=e.useRef(null);e.useEffect(()=>{S()},[t]),e.useEffect(()=>{if(s.length>0&&!l){const e=setTimeout(()=>{N(s)},50);return()=>clearTimeout(e)}},[s,l]),e.useEffect(()=>{const e=e=>{const t=document.getElementById("tt-hover-line"),a=document.querySelector(".monthly-timetracker-wrapper"),n=v.current;if(!t||!a||!n)return;const s=a.getBoundingClientRect();n.getBoundingClientRect();const o=e.clientY-s.top+a.scrollTop;t.style.top=o+"px",t.style.display="block"},t=()=>{const e=document.getElementById("tt-hover-line");e&&(e.style.display="none")},a=setTimeout(()=>{const a=document.querySelector(".monthly-timetracker-wrapper");a&&(a.addEventListener("mousemove",e),a.addEventListener("mouseleave",t))},100);return()=>{clearTimeout(a);const n=document.querySelector(".monthly-timetracker-wrapper");n&&(n.removeEventListener("mousemove",e),n.removeEventListener("mouseleave",t))}},[s]);const S=async()=>{c(!0),f(null);try{const e=t.getFullYear(),a=t.getMonth()+1,n=await u.getMonthlyTimeStats(e,a);n.success?(o(n.data.days),i(n.data.categories||[]),c(!1)):(f(n.error||"ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨"),c(!1))}catch(e){f(e.message||"ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),c(!1)}},N=e=>{if(!v.current)return;const a=v.current.querySelectorAll(".tt-day-column"),n=e.flatMap(e=>e.events||[]),s=t.getFullYear(),o=t.getMonth(),r=e=>{if(!e)return new Date;const t=e.split(/[+Z]/)[0];return new Date(t)};e.forEach(e=>{const t=a[e.date-1];if(!t)return;const i=[];n.forEach(t=>{const a=r(t.start),n=r(t.end),l=new Date(s,o,e.date,0,0,0,0);a<new Date(s,o,e.date+1,0,0,0,0)&&n>l&&i.push(t)}),i.length>0&&C(t,i),D(t,e.date,n)})},D=(e,a,n)=>{const s=t.getFullYear(),o=t.getMonth(),r=g(new Date(s,o,a));let i=null,l=null;const c=e=>{if(!e)return new Date;const t=e.split(/[+Z]/)[0];return new Date(t)};n.forEach(e=>{if(e.is_sleep&&!e.is_plan){const t=c(e.start),a=c(e.end),n=g(t);if(g(a)===r&&(i=a.getHours()),n===r){const e=t.getHours();(null===l||e>l)&&(l=e)}}});const d=e.querySelectorAll(".tt-hour-cell");if(null!==i&&d[i]){const e=document.createElement("div");e.className="tt-wake-marker",e.textContent=String(i).padStart(2,"0"),d[i].appendChild(e)}if(null!==l&&d[l]){const e=document.createElement("div");e.className="tt-sleep-marker",e.textContent=String(l).padStart(2,"0"),d[l].appendChild(e)}},C=(e,a)=>{var n;const s=e.querySelector(".tt-date-header"),o=e.querySelector(".tt-hour-cell");if(!s||!o)return;const r=s.offsetHeight,i=o.offsetHeight,l=parseInt((null==(n=e.querySelector(".tt-date-day"))?void 0:n.textContent)||"0");if(!l)return;const c=t.getFullYear(),d=t.getMonth(),h=new Date(c,d,l,0,0,0,0),u=new Date(c,d,l+1,0,0,0,0),g=e=>{if(!e)return new Date;const t=e.split(/[+Z]/)[0];return new Date(t)};a.forEach(t=>{const a=g(t.start),n=g(t.end),s=a<h?h:a,o=n>u?u:n;let l=60*s.getHours()+s.getMinutes(),c=60*o.getHours()+o.getMinutes();o.getTime()===u.getTime()&&(c=1440);const d=c-l;if(d<=0)return;const f=r+l/60*i,x=d/60*i,j=document.createElement("div");j.className="tt-event-block";const v=function(e,t){if(!e)return t||"#2383e2";const a=e.match(/[â‘ â‘¡â‘¢â‘£â‘¤â‘¥â‘¦â‘§â‘¨]/);return a&&p[a[0]]?p[a[0]]:t||"#2383e2"}(t.calendarName,t.color),S=function(e){if(!e)return"#ffffff";if(m[e])return m[e];const t=e.match(/[â‘ â‘¡â‘¢â‘£â‘¤â‘¥â‘¦â‘§â‘¨]/);if(t){const e={"â‘ ":"â‘  ë‚­ë¹„ì‹œê°„","â‘¡":"â‘¡ ì‚¬íšŒì ","â‘¢":"â‘¢ ì§€ì ","â‘£":"â‘£ ì˜ì ","â‘¤":"â‘¤ ìž ","â‘¥":"â‘¥ ìš´ë™","â‘¦":"â‘¦ ê¸°íƒ€"}[t[0]];if(e&&m[e])return m[e]}return m.default}(t.calendarName),w=y(v,.35);Object.assign(j.style,{background:w,color:S,borderLeftColor:v,top:f+"px",height:Math.max(x,8)+"px",position:"absolute",left:"2px",right:"2px"});const b=document.createElement("div");b.className="tt-event-tooltip";const N=a.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),D=n.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"});b.innerHTML=`\n        <div class="tt-tooltip-title">${t.title}</div>\n        <div class="tt-tooltip-time">${N} - ${D}</div>\n      `,j.appendChild(b),e.appendChild(j)})};return l?d.jsx("div",{className:"monthly-timetracker-wrapper",children:d.jsxs("div",{className:"monthly-loading-overlay",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("div",{className:"loading-text",children:"ì‹œê°„ ì¶”ì  ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]})}):h?d.jsx("div",{className:"monthly-timetracker-wrapper",children:d.jsxs("div",{className:"loading",style:{color:"#eb5757"},children:["ì˜¤ë¥˜: ",h]})}):(()=>{const e=t.getFullYear(),s=t.getMonth()+1,o=new Date(e,s,0).getDate(),r=g(new Date),i=["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "];return d.jsxs("div",{className:"monthly-timetracker-wrapper",children:[d.jsx("div",{className:"tt-hover-line",id:"tt-hover-line"}),d.jsxs("div",{className:"monthly-timetracker",ref:v,children:[d.jsxs("div",{className:"tt-time-column",children:[d.jsx("div",{className:"tt-time-header",children:"ì‹œê°„"}),Array.from({length:24},(e,t)=>d.jsx("div",{className:"tt-hour-cell tt-time-cell",children:String(t).padStart(2,"0")},t))]}),Array.from({length:o},(t,o)=>{const l=o+1,c=new Date(e,s-1,l),h=g(c),u=c.getDay(),p=h===r,m=0===u||6===u,y=w(n,c),f=y.length>0;return d.jsxs("div",{className:"tt-day-column "+(m?"weekend":""),style:{gridColumn:l+1,gridRow:"1 / -1"},children:[d.jsxs("div",{className:`tt-date-header ${p?"today":""} ${m?"weekend":""}`,onClick:()=>a(h),onMouseEnter:e=>{if(f){const t=e.currentTarget.getBoundingClientRect();j({visible:!0,x:t.left+t.width/2,y:t.bottom+5,events:y})}},onMouseLeave:()=>j(e=>({...e,visible:!1})),children:[d.jsx("div",{className:"tt-date-day",children:l}),d.jsx("div",{className:"tt-date-weekday",children:i[u]}),f&&d.jsx("div",{className:"tt-has-events-dot"})]}),Array.from({length:24},(e,t)=>d.jsx("div",{className:"tt-hour-cell","data-hour":t},t))]},l)})]}),x.visible&&d.jsx("div",{className:"tt-calendar-tooltip",style:{position:"fixed",top:x.y,left:x.x,transform:"translateX(-50%)",zIndex:1e3},children:x.events.map((e,t)=>d.jsxs("div",{className:"tt-tooltip-item",children:[d.jsx("div",{className:"tt-tooltip-color",style:{backgroundColor:e.calendarColor||"#007bff"}}),d.jsxs("div",{className:"tt-tooltip-content",children:[d.jsx("div",{className:"tt-tooltip-title",children:e.title}),d.jsx("div",{className:"tt-tooltip-time",children:b(e)})]})]},t))})]})})()}const D=({dailyStats:t,categories:a,currentMonth:n,height:s=300})=>{const o=e.useRef(null),[r,i]=e.useState(0),[l,c]=e.useState(null),[h,u]=e.useState(new Set);e.useEffect(()=>{o.current&&i(o.current.offsetWidth);const e=new ResizeObserver(e=>{for(let t of e)i(t.contentRect.width)});return o.current&&e.observe(o.current),()=>{e.disconnect()}},[]);if(!t||!a||0===a.length)return d.jsx("div",{className:"line-chart-placeholder",style:{height:s,display:"flex",alignItems:"center",justifyContent:"center",color:"#94a3b8"},children:"ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤"});const p=n.getFullYear(),m=n.getMonth()+1,y=new Date(p,m,0).getDate(),g=a.filter(e=>!h.has(e.id));let f=0;const x=g.map(e=>{const a=[];for(let n=1;n<=y;n++){const s=`${p}-${String(m).padStart(2,"0")}-${String(n).padStart(2,"0")}`,o=t[s]&&t[s][e.id]||0;a.push({day:n,minutes:o,dateKey:s}),o>f&&(f=o)}return{...e,points:a}});f=Math.max(f,60);const j=60*Math.ceil(f/60),v=20,S=40,w=r||600,b=w-S-20,N=s-v-30,D=e=>(e-1)/(y-1)*b,C=e=>N-e/j*N,T=x.map(e=>{const t=e.points.map((e,t)=>`${0===t?"M":"L"} ${D(e.day)} ${C(e.minutes)}`).join(" ");return{...e,d:t}}),$=[],k=Math.max(1,Math.ceil(j/60/5));for(let e=0;e<=j;e+=60*k)$.push(e);const E=[];for(let e=1;e<=y;e+=5)E.push(e);return d.jsxs("div",{className:"category-line-chart",ref:o,style:{position:"relative",width:"100%"},children:[r>0&&d.jsx("svg",{width:w,height:s,children:d.jsxs("g",{transform:`translate(${S}, ${v})`,children:[$.map(e=>d.jsx("line",{x1:0,y1:C(e),x2:b,y2:C(e),stroke:"#f1f5f9",strokeWidth:"1",strokeDasharray:"4 4"},`grid-y-${e}`)),d.jsx("line",{x1:0,y1:0,x2:0,y2:N,stroke:"#e2e8f0",strokeWidth:"1"}),d.jsx("line",{x1:0,y1:N,x2:b,y2:N,stroke:"#e2e8f0",strokeWidth:"1"}),$.map(e=>d.jsxs("text",{x:-10,y:C(e),textAnchor:"end",dominantBaseline:"middle",fontSize:"11",fill:"#94a3b8",fontWeight:"500",children:[e/60,"h"]},`label-y-${e}`)),E.map(e=>d.jsx("text",{x:D(e),y:N+20,textAnchor:"middle",fontSize:"11",fill:"#94a3b8",fontWeight:"500",children:e},`label-x-${e}`)),T.map(e=>d.jsx("path",{d:e.d,fill:"none",stroke:e.color,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",opacity:l&&l.catId!==e.id?.2:.9,style:{transition:"opacity 0.2s ease"}},`line-${e.id}`)),x.map(e=>d.jsx("g",{children:e.points.map((t,a)=>{if(0===t.minutes)return null;const n=D(t.day),s=C(t.minutes),o=l&&l.catId===e.id&&l.day===t.day;return d.jsx("circle",{cx:n,cy:s,r:o?6:3.5,fill:e.color,stroke:"#fff",strokeWidth:o?3:2,onMouseEnter:()=>c({x:n+S,y:s+v,...t,catName:e.name,color:e.color,catId:e.id}),onMouseLeave:()=>c(null),style:{cursor:"pointer",transition:"all 0.2s ease"}},`point-${e.id}-${a}`)})},`points-${e.id}`))]})}),l&&d.jsxs("div",{style:{position:"absolute",left:l.x,top:l.y-10,transform:"translate(-50%, -100%)",backgroundColor:"rgba(255, 255, 255, 0.95)",color:"#1e293b",padding:"8px 12px",borderRadius:"8px",fontSize:"13px",pointerEvents:"none",whiteSpace:"nowrap",zIndex:10,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",border:`1px solid ${l.color}`,marginBottom:"8px"},children:[d.jsx("div",{style:{fontWeight:"600",color:l.color,marginBottom:"2px"},children:l.catName}),d.jsxs("div",{style:{color:"#64748b",fontSize:"12px"},children:[l.day,"ì¼: ",d.jsxs("span",{style:{color:"#1e293b",fontWeight:"500"},children:[Math.floor(l.minutes/60),"ì‹œê°„ ",l.minutes%60,"ë¶„"]})]}),d.jsx("div",{style:{position:"absolute",bottom:"-5px",left:"50%",transform:"translateX(-50%) rotate(45deg)",width:"10px",height:"10px",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRight:`1px solid ${l.color}`,borderBottom:`1px solid ${l.color}`,zIndex:-1}})]}),d.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",marginTop:"20px",gap:"16px"},children:a.map(e=>{const t=h.has(e.id);return d.jsxs("div",{onClick:()=>(e=>{const t=new Set(h);t.has(e)?t.delete(e):t.add(e),u(t)})(e.id),style:{display:"flex",alignItems:"center",fontSize:"13px",color:t?"#cbd5e1":"#475569",cursor:"pointer",userSelect:"none",padding:"4px 8px",borderRadius:"16px",backgroundColor:t?"transparent":"#f8fafc",border:"1px solid "+(t?"transparent":"#e2e8f0"),transition:"all 0.2s ease"},children:[d.jsx("div",{style:{width:"10px",height:"10px",backgroundColor:t?"#cbd5e1":e.color,borderRadius:"50%",marginRight:"8px",boxShadow:t?"none":`0 0 0 2px rgba(255, 255, 255, 1), 0 0 0 3px ${e.color}`}}),d.jsx("span",{style:{textDecoration:t?"line-through":"none"},children:e.name})]},e.id)})})]})};function C({currentMonth:t,goToDate:a,calendarEvents:n=[]}){const[s,o]=e.useState(null),[r,i]=e.useState(!0),[l,c]=e.useState(null),[h,p]=e.useState({visible:!1,x:0,y:0,events:[]});e.useEffect(()=>{m()},[t]);const m=async()=>{i(!0),c(null);try{const e=t.getFullYear(),a=t.getMonth()+1,n=await u.getMonthlyRoutineMoodStats(e,a);n.success?o(n.data):c(n.error||"ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨")}catch(e){c(e.message||"ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")}finally{i(!1)}};return r?d.jsx("div",{className:"monthly-stats-wrapper",children:d.jsxs("div",{className:"monthly-loading-overlay",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("div",{className:"loading-text",children:"í†µê³„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]})}):l?d.jsx("div",{className:"monthly-stats-wrapper",children:d.jsxs("div",{className:"loading",style:{color:"#eb5757"},children:["ì˜¤ë¥˜: ",l]})}):d.jsxs("div",{className:"monthly-stats-wrapper",children:[d.jsxs("div",{className:"stats-row",children:[d.jsxs("div",{className:"stats-section stats-half",children:[d.jsx("h3",{className:"stats-section-title",children:"ðŸ“ˆ ë£¨í‹´ ìˆ˜í–‰ë¥ "}),(()=>{if(!s||!s.routineStats||0===s.routineStats.length)return d.jsx("div",{className:"no-data",children:"ë£¨í‹´ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤"});const e=s.routineStats;return d.jsx("div",{className:"routine-bar-chart",children:e.map((e,t)=>{return d.jsxs("div",{className:"routine-bar-item",children:[d.jsx("div",{className:"routine-bar-label",children:e.text}),d.jsx("div",{className:"routine-bar-container",children:d.jsx("div",{className:"routine-bar-fill",style:{width:`${e.percentage}%`,backgroundColor:(a=e.percentage,a>=70?"#a8e6cf":a>=40?"#ffd3b6":"#ffaaa5")},children:d.jsxs("span",{className:"routine-bar-percentage",children:[e.percentage,"%"]})})})]},t);var a})})})()]}),d.jsxs("div",{className:"stats-section stats-half",children:[d.jsx("h3",{className:"stats-section-title",children:"ðŸ˜Š ê¸°ë¶„ í†µê³„"}),(()=>{if(!s||!s.moodStats)return d.jsx("div",{className:"no-data",children:"ê¸°ë¶„ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤"});const{counts:e,percentages:t,total:a,labels:n}=s.moodStats,o={Good:"#a8e6cf",SoSo:"#ffd3b6",Bad:"#ffaaa5"};let r=-90;const i=[];Object.keys(e).forEach(a=>{if(e[a]>0){const s=t[a],l=s/100*360;i.push({mood:a,startAngle:r,endAngle:r+l,percentage:s,count:e[a],color:o[a],label:n[a]}),r+=l}});const l=e=>{const{startAngle:t,endAngle:a,color:n}=e,s=80,o=t*Math.PI/180,r=a*Math.PI/180;return["M 100 100",`L ${100+s*Math.cos(o)} ${100+s*Math.sin(o)}`,`A 80 80 0 ${a-t>180?1:0} 1 ${100+s*Math.cos(r)} ${100+s*Math.sin(r)}`,"Z"].join(" ")},c=e=>{const{startAngle:t,endAngle:a}=e,n=(t+a)/2*Math.PI/180;return{x:100+55*Math.cos(n),y:100+55*Math.sin(n)}};return d.jsxs("div",{className:"mood-pie-container",children:[d.jsx("div",{className:"pie-chart-wrapper",children:d.jsx("svg",{viewBox:"0 0 200 200",className:"pie-chart",children:i.map((e,t)=>d.jsxs("g",{children:[d.jsx("path",{d:l(e),fill:e.color,stroke:"white",strokeWidth:"2"}),e.percentage>0&&d.jsxs("text",{x:c(e).x,y:c(e).y,textAnchor:"middle",dominantBaseline:"middle",fill:"#333",fontSize:"10",fontWeight:"600",children:[d.jsx("tspan",{x:c(e).x,dy:"-5",children:e.label}),d.jsxs("tspan",{x:c(e).x,dy:"12",children:[e.percentage,"%"]})]})]},t))})}),d.jsxs("div",{className:"pie-legend",children:[i.map((e,t)=>d.jsxs("div",{className:"legend-item",children:[d.jsx("div",{className:"legend-color",style:{backgroundColor:e.color}}),d.jsxs("div",{className:"legend-label",children:[e.label,": ",e.count,"ì¼ (",e.percentage,"%)"]})]},t)),d.jsxs("div",{className:"mood-total",children:["ì´ ê¸°ë¡ì¼: ",a,"ì¼"]})]})]})})()]})]}),d.jsxs("div",{className:"stats-section",children:[d.jsx("h3",{className:"stats-section-title",children:"ðŸ“Š ì¼ë³„ ë£¨í‹´, ê¸°ë¶„, ì‹œê°„ í†µê³„"}),(()=>{if(!s||!s.routineStats||0===s.routineStats.length)return d.jsx("div",{className:"no-data",children:"ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤"});const e=t.getFullYear(),o=t.getMonth()+1,r=new Date(e,o,0).getDate(),i=["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "],l={Good:"ðŸ˜Š",SoSo:"ðŸ˜",Bad:"ðŸ˜¢"},c={Good:"#a8e6cf",SoSo:"#ffd3b6",Bad:"#ffaaa5"};return d.jsxs("div",{className:"stats-table-wrapper",children:[d.jsxs("table",{className:"stats-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{className:"routine-name-col",children:"í•­ëª©"}),Array.from({length:r},(t,s)=>{const r=s+1,l=new Date(e,o-1,r),c=l.getDay(),h=0===c||6===c,u=g(new Date),m=`${e}-${String(o).padStart(2,"0")}-${String(r).padStart(2,"0")}`,y=m===u,f=w(n,l),x=f.length>0;return d.jsxs("th",{className:`day-col ${h?"weekend":""} ${y?"today":""}`,onClick:()=>a(m),onMouseEnter:e=>{if(x){const t=e.currentTarget.getBoundingClientRect();p({visible:!0,x:t.left+t.width/2,y:t.bottom+5,events:f})}},onMouseLeave:()=>p(e=>({...e,visible:!1})),children:[d.jsx("div",{className:"day-num",children:r}),d.jsx("div",{className:"day-weekday",children:i[c]}),x&&d.jsx("div",{className:"stats-has-events-dot"})]},r)}),d.jsx("th",{className:"percentage-col",children:"ìˆ˜í–‰ë¥ "})]})}),d.jsxs("tbody",{children:[s.routineStats.map(t=>d.jsxs("tr",{children:[d.jsx("td",{className:"routine-name",children:t.text}),Array.from({length:r},(n,s)=>{const r=s+1,i=`${e}-${String(o).padStart(2,"0")}-${String(r).padStart(2,"0")}`,l=t.dailyStatus[i],c=new Date(e,o-1,r).getDay(),h=0===c||6===c,u=new Date;u.setHours(0,0,0,0);const p=new Date(e,o-1,r);p.setHours(0,0,0,0);const m=p>u;return d.jsx("td",{className:`status-cell ${h?"weekend":""} ${m?"future":""} ${l?"checked":""}`,onClick:()=>a(i),style:l&&!m?{backgroundColor:"rgb(168, 230, 207)"}:{},children:m?"":l?t.emoji||"âœ“":""},r)}),d.jsx("td",{className:"percentage-cell",children:d.jsxs("div",{className:"percentage-bar-wrapper",children:[d.jsx("div",{className:"percentage-bar",style:{width:`${t.percentage}%`}}),d.jsxs("span",{className:"percentage-text",children:[t.percentage,"%"]})]})})]},t.id)),d.jsx("tr",{className:"separator-row",children:d.jsx("td",{colSpan:r+2,style:{height:"10px",backgroundColor:"#f0f0f0"}})}),s.dailyMoods&&["Good","SoSo","Bad"].map(t=>d.jsxs("tr",{children:[d.jsxs("td",{className:"mood-label",children:[l[t]," ",t]}),Array.from({length:r},(n,r)=>{const i=r+1,h=`${e}-${String(o).padStart(2,"0")}-${String(i).padStart(2,"0")}`,u=s.dailyMoods[h],p=new Date(e,o-1,i).getDay(),m=0===p||6===p,y=u?u.charAt(0).toUpperCase()+u.slice(1).toLowerCase():null,g=("Soso"===y?"SoSo":y)===t,f=g?{backgroundColor:c[t]}:{};return d.jsx("td",{className:`mood-cell ${m?"weekend":""} ${g?"checked":""}`,onClick:()=>a(h),style:f,children:g?l[t]:""},i)}),d.jsx("td",{className:"percentage-cell"})]},t)),d.jsx("tr",{className:"separator-row",children:d.jsx("td",{colSpan:r+2,style:{height:"10px",backgroundColor:"#f0f0f0"}})}),s.categoryStats&&[...s.categoryStats].filter(e=>e.totalMinutes>0).sort((e,t)=>e.id-t.id).map(t=>{var n,i;let l=0,c=0;for(let a=1;a<=r;a++){const r=`${e}-${String(o).padStart(2,"0")}-${String(a).padStart(2,"0")}`,d=(null==(i=null==(n=s.dailyCategoryStats)?void 0:n[r])?void 0:i[t.id])||0;d>0&&(l++,d>c&&(c=d))}const h=l>0?(t.totalMinutes/60/l).toFixed(1):0;return d.jsxs("tr",{children:[d.jsx("td",{className:"category-label",children:d.jsxs("div",{className:"category-label-content",children:[d.jsx("div",{className:"category-color-dot",style:{backgroundColor:t.color||"#999"}}),d.jsx("span",{children:t.name})]})}),Array.from({length:r},(n,r)=>{var i,l;const h=r+1,u=`${e}-${String(o).padStart(2,"0")}-${String(h).padStart(2,"0")}`,p=new Date(e,o-1,h).getDay(),m=0===p||6===p,y=(null==(l=null==(i=s.dailyCategoryStats)?void 0:i[u])?void 0:l[t.id])||0,g=y>0?(y/60).toFixed(1):"";let f="15";if(y>0&&c>0){const e=.15,t=e+y/c*(.7-e);f=Math.round(255*t).toString(16).padStart(2,"0")}return d.jsx("td",{className:"category-time-cell "+(m?"weekend":""),onClick:()=>a(u),style:{fontSize:"11px",color:"#666",backgroundColor:y>0?`${t.color}${f}`:"transparent"},children:g},h)}),d.jsx("td",{className:"percentage-cell",children:d.jsxs("div",{className:"category-total-time",children:[h,"h"]})})]},t.id)})]})]}),h.visible&&d.jsx("div",{className:"stats-calendar-tooltip",style:{position:"fixed",top:h.y,left:h.x,transform:"translateX(-50%)",zIndex:1e3},children:h.events.map((e,t)=>d.jsxs("div",{className:"stats-tooltip-item",children:[d.jsx("div",{className:"stats-tooltip-color",style:{backgroundColor:e.calendarColor||"#007bff"}}),d.jsxs("div",{className:"stats-tooltip-content",children:[d.jsx("div",{className:"stats-tooltip-title",children:e.title}),d.jsx("div",{className:"stats-tooltip-time",children:b(e)})]})]},t))})]})})()]}),d.jsxs("div",{className:"stats-section",children:[d.jsx("h3",{className:"stats-section-title",children:"â±ï¸ ì¹´í…Œê³ ë¦¬ë³„ ì¼ë³„ ì‹œê°„ ì¶”ì´"}),s&&s.categoryStats&&0!==s.categoryStats.length?d.jsx("div",{className:"category-line-chart-container",style:{padding:"20px"},children:d.jsx(D,{dailyStats:s.dailyCategoryStats,categories:s.categoryStats,currentMonth:t,height:300})}):d.jsx("div",{className:"no-data",children:"ì¹´í…Œê³ ë¦¬ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤"})]})]})}const T=Object.freeze(Object.defineProperty({__proto__:null,default:function({goToDate:t}){const[a,n]=e.useState(new Date),[s,o]=e.useState([]),[r,i]=e.useState([]),[l,c]=e.useState(!0),[h,p]=e.useState("calendar"),[m,f]=e.useState(new Set);e.useEffect(()=>{"calendar"!==h&&"time"!==h||("calendar"===h&&j(),x())},[a,h]);const x=async()=>{try{let t=[];try{const e=await u.getCalendars();e.success&&Array.isArray(e.data)&&(t=e.data.filter(e=>e.enabled))}catch(e){}if(0===t.length){const e=localStorage.getItem("iCloudCalendars");if(e)t=JSON.parse(e).filter(e=>e.enabled);else{const e=localStorage.getItem("iCloudCalendarUrl");e&&(t=[{url:e,color:"#007bff",name:"Calendar",enabled:!0}])}}if(t.length>0){const e=await S(t);i(e)}else i([])}catch(t){}},j=async()=>{c(!0);try{const e=a.getFullYear(),t=a.getMonth()+1,n=await u.getMonthlyStats(e,t);n.success&&o(n.data)}catch(e){}finally{c(!1)}},v=e=>{const t=new Date(a);t.setMonth(t.getMonth()+e),n(t),f(new Set)};return d.jsxs("div",{className:"monthly-container",children:[d.jsxs("div",{className:"monthly-header",children:[d.jsx("button",{className:"month-nav-btn",onClick:()=>v(-1),children:"â—€"}),d.jsx("div",{className:"current-month",children:`${a.getFullYear()}ë…„ ${a.getMonth()+1}ì›”`}),d.jsx("button",{className:"month-nav-btn",onClick:()=>v(1),children:"â–¶"}),d.jsx("div",{className:"header-actions",children:d.jsxs("div",{className:"view-mode-selector header-inline",children:[d.jsx("button",{className:"view-mode-btn "+("calendar"===h?"active":""),onClick:()=>p("calendar"),children:"ðŸ“… ìº˜ë¦°ë” ë·°"}),d.jsx("button",{className:"view-mode-btn "+("time"===h?"active":""),onClick:()=>p("time"),children:"â° ì‹œê°„ ì¶”ì  ë·°"}),d.jsx("button",{className:"view-mode-btn "+("stats"===h?"active":""),onClick:()=>p("stats"),children:"ðŸ“Š í†µê³„ ë·°"})]})})]}),"calendar"===h&&(l?d.jsxs("div",{className:"monthly-loading-overlay",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("div",{className:"loading-text",children:"ìº˜ë¦°ë” ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]}):(()=>{const e=a.getFullYear(),n=a.getMonth(),o=new Date(e,n+1,0).getDate(),i=new Date(e,n,1).getDay(),l=g(new Date),c=[];for(let t=1;t<=o;t++)c.push(new Date(e,n,t));const h=[...r].sort((e,t)=>{const a=new Date(e.startDate)-new Date(t.startDate);if(0!==a)return a;const n=(e.endDate?new Date(e.endDate):new Date(e.startDate))-new Date(e.startDate);return(t.endDate?new Date(t.endDate):new Date(t.startDate))-new Date(t.startDate)-n}),u={};return c.forEach(e=>u[g(e)]=[]),h.forEach(e=>{const t=c.filter(t=>((e,t)=>{const a=new Date(t);a.setHours(0,0,0,0);const n=new Date(a);n.setDate(n.getDate()+1);const s=new Date(e.startDate);let o;return e.isAllDay&&s.setHours(0,0,0,0),e.endDate?(o=new Date(e.endDate),e.isAllDay&&o.setHours(0,0,0,0)):(o=new Date(s),e.isAllDay?o.setDate(o.getDate()+1):o.setHours(23,59,59,999)),s<n&&o>a})(e,t));if(0===t.length)return;let a=0;for(;;){if(t.every(e=>{const t=g(e);return!u[t][a]}))break;a++}t.forEach(t=>{const n=g(t);u[n][a]=e})}),d.jsxs("div",{className:"monthly-grid",children:[["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "].map(e=>d.jsx("div",{className:"monthly-day-header",children:e},e)),Array.from({length:i},(e,t)=>d.jsx("div",{className:"monthly-day-cell empty"},`empty-${t}`)),c.map((e,a)=>{var n;const o=e.getDate(),r=g(e),i=u[r]||[],c=null==(n=(s||[]).find(e=>e.date===o))?void 0:n.firstImage;let h=-1;for(let t=2;t>=0;t--)if(i[t]){h=t;break}const p=[];for(let t=0;t<=h;t++)p.push(t);const x=i.slice(3).filter(e=>null!==e).length,j=x>0;return d.jsxs("div",{className:"monthly-day-cell "+(r===l?"today":""),onClick:()=>t(r),children:[d.jsx("div",{className:"monthly-date-num",children:o}),d.jsxs("div",{className:"monthly-events-list",children:[p.map(t=>{const a=i[t];if(!a)return d.jsx("div",{className:"monthly-event-spacer"},t);const n=new Date(a.startDate);a.isAllDay&&n.setHours(0,0,0,0);const s=n.getTime()>=e.getTime();let r;a.endDate?(r=new Date(a.endDate),a.isAllDay&&r.setHours(0,0,0,0)):(r=new Date(n),a.isAllDay?r.setDate(r.getDate()+1):r.setHours(23,59,59,999));const l=new Date(e);l.setDate(l.getDate()+1);const c=r.getTime()<=l.getTime();return d.jsx("div",{className:`monthly-event-item ${s?"":"continuation-left"} ${c?"":"continuation-right"}`,style:{backgroundColor:y(a.calendarColor||"#007bff",.12),color:"#000000",borderLeftColor:s?a.calendarColor||"#007bff":"transparent"},title:a.title,children:s||1===o?a.title:"Â "},t)}),j&&d.jsxs("div",{className:"monthly-event-more",children:["+",x]})]}),c&&d.jsxs("div",{className:"monthly-thumbnail-wrapper",children:[!m.has(r)&&d.jsx("div",{className:"monthly-thumbnail-skeleton"}),d.jsx("img",{src:c.thumbnailUrl,className:"monthly-thumbnail",alt:"Daily thumbnail",style:{opacity:m.has(r)?1:0,transition:"opacity 0.3s ease-in-out"},onLoad:()=>(e=>{f(t=>new Set([...t,e]))})(r),onError:e=>{c.viewUrl&&e.target.src===c.thumbnailUrl&&(e.target.src=c.viewUrl)}})]})]},r)})]})})()),"time"===h&&d.jsx(N,{currentMonth:a,goToDate:t,calendarEvents:r}),"stats"===h&&d.jsx(C,{currentMonth:a,goToDate:t,calendarEvents:r})]})}},Symbol.toStringTag,{value:"Module"}));export{T as M,u as a,w as b,b as c,S as f,g,y as h,d as j};
